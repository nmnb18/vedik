<div class="relative overflow-x-auto">
  <div class="flex justify-between p-4">
    <div class="text-2xl font-semibold">Client Details</div>
    <div class="flex gap-4">
      <button
        (click)="print()"
        class="bg-blue-600 cursor-pointer text-white px-4 py-2 rounded-md mb-4"
      >
        üñ®Ô∏è Print
      </button>
      <button
        class="bg-gray-300 mb-4 px-4 py-2 rounded-md cursor-pointer"
        (click)="goBack()"
      >
        ‚Üê Back to Clients
      </button>
    </div>
  </div>
  <div class="sub-header py-2" id="print-section">
    <div class="p-4">
      <!-- Client Info Card -->
      <div class="bg-white rounded-lg shadow p-4 mb-4">
        <h2 class="text-2xl font-semibold mb-2">
          {{ getName() }}
        </h2>
        <p class="text-sm text-gray-700">Email: {{ client.email }}</p>
        <p class="text-sm text-gray-700">Phone: {{ client.phoneNo }}</p>
        <p class="text-sm text-gray-700">
          Address: {{ client.address }}, {{ client.city }}, {{ client.state }} -
          {{ client.postCode }}
        </p>
        <p class="text-sm text-gray-700">GST No.: {{ client.gstNo }}</p>
      </div>

      <!-- Ledger Table -->
      <p-table
        #ledgerTable
        [value]="orders"
        dataKey="id"
        responsiveLayout="stack"
        [tableStyle]="{ 'min-width': 'auto' }"
        [paginator]="true"
        [rows]="10"
        [globalFilterFields]="['orderId']"
        sortMode="multiple"
        editable="true"
      >
        <!-- Global Search -->
        <ng-template #caption>
          <div class="flex justify-end mb-2 no-print">
            <input
              pInputText
              type="text"
              placeholder="Search Order ID"
              (input)="onGlobalFilter($event)"
              class="border border-gray-300 rounded p-2 w-full sm:w-1/3"
            />
          </div>
        </ng-template>

        <!-- Table Header -->
        <ng-template pTemplate="header" #header>
          <tr>
            <th>#</th>
            <th pSortableColumn="orderId">
              Order ID
              <p-sortIcon field="orderId" class="no-print"></p-sortIcon>
            </th>
            <th pSortableColumn="orderDate">
              Order Date
              <p-sortIcon field="orderDate" class="no-print"></p-sortIcon>
            </th>
            <th>Bill Amount</th>
            <!-- <th>Received</th> -->
            <!-- <th>Balance</th> -->
          </tr>
          <tr></tr>
        </ng-template>

        <!-- Table Body -->
        <ng-template pTemplate="body" let-order let-i="rowIndex">
          <tr>
            <td data-label="#">{{ i + 1 }}</td>
            <td data-label="Order ID">{{ order.orderId }}</td>
            <td data-label="Order Date">{{ order.orderDate }}</td>
            <td data-label="Bill Amount">
              {{ order.grandTotal | currency : "INR" }}
            </td>

            <!-- <td
              [pEditableColumn]="order.paidAmount"
              pEditableColumnField="code"
              class="w-[20%]"
            >
              <p-cellEditor>
                <ng-template #input>
                  <input
                    pInputText
                    type="text"
                    [(ngModel)]="order.paidAmount"
                    (blur)="onRowEditSave(order)"
                    class="rounded border"
                  />
                </ng-template>
                <ng-template #output>
                  {{ order.paidAmount || "Click to update" }}
                </ng-template>
              </p-cellEditor>
            </td> -->
            <!-- <td data-label="Balance">
              &#8377; {{ order.grandTotal - order.paidAmount }}
            </td> -->
          </tr>
        </ng-template>

        <!-- Footer with totals -->
        <ng-template pTemplate="footer">
          <tr class="font-bold">
            <td colspan="3" class="text-right">Total:</td>
            <td>{{ totalAmount | currency : "INR" }}</td>
            <!-- <td>{{ totalReceived | currency : "INR" }}</td>
            <td>&#8377; {{ totalAmount - totalReceived }}</td> -->
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
